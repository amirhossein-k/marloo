// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum OrderStatus {
  LOADING
  DONE
  SEE
  POST
}

enum PurchaseOrderStatus {
  LOADING // Ù‡Ù†ÙˆØ² Ø¯Ø± Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø³Øª Ùˆ Ù¾ÙˆÙ„ Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ø´Ø¯Ù‡
  LOADINGPAID ///Ù…Ù†ØªÙÙ„ Ø´Ø¯Ù‡ Ø¨Ù‡ ØµÙØ­Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª
  PENDING // Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯ ØªØ§Ù…ÛŒÙ†â€ŒÚ©Ù†Ù†Ø¯Ù‡
  CONFIRMED // ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· ØªØ§Ù…ÛŒÙ†â€ŒÚ©Ù†Ù†Ø¯Ù‡ (Ù…Ù†ØªØ¸Ø± Ù¾Ø±Ø¯Ø§Ø®Øª)
  PAID // Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡ (Ø±Ø³ÛŒØ¯ Ø¢Ù¾Ù„ÙˆØ¯ Ø´Ø¯Ù‡)
  SHIPPED_BY_SUPPLIER // Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· ØªØ§Ù…ÛŒÙ†â€ŒÚ©Ù†Ù†Ø¯Ù‡
  DELIVERED_TO_STORE // ØªØ­ÙˆÛŒÙ„ Ø¨Ù‡ ÙØ±ÙˆØ´Ú¯Ø§Ù‡
  SHIPPED_TO_CUSTOMER // Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ø´ØªØ±ÛŒ Ù†Ù‡Ø§ÛŒÛŒ
  COMPLETED // ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡ (ØªØ­ÙˆÛŒÙ„ Ø¨Ù‡ Ù…Ø´ØªØ±ÛŒ Ù†Ù‡Ø§ÛŒÛŒ)
  CANCELLED // Ù„ØºÙˆ Ø´Ø¯Ù‡
}

model OTP {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  phone     String
  codeHash  String
  createdAt DateTime @default(now())
  expiresAt DateTime
}

model User {
  id             String           @id @default(auto()) @map("_id") @db.ObjectId
  password       String?
  name           String?
  phoneNumber    String           @unique
  purchaseOrders PurchaseOrder[]  @relation("userPurchaseOrders")
  products       Product[]        @relation("userPost")
  isVerfied      Boolean          @default(false)
  listordershop  InvoiceProduct[] @relation("userPost")
  address        Adress[]
  admin          Boolean          @default(false)
  createdAt      DateTime         @default(now())
}

model InvoiceProduct {
  id String @id @default(auto()) @map("_id") @db.ObjectId
  // order   Product[] @relation("poroductOrder") // Ø§Ù‚Ù„Ø§Ù… Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯
  // idOrder String

  countOrder     Float
  total          Float?
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  variantId      String?     @db.ObjectId // Ú©Ù„ÛŒØ¯ Ø®Ø§Ø±Ø¬ÛŒ Ø¨Ù‡ ÙˆØ§Ø±ÛŒØ§Ù†Øª (Ø±Ù†Ú¯ + Ù…ÙˆØ¬ÙˆØ¯ÛŒ)
  variant        Variant?    @relation("invoiceVariant", fields: [variantId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  quantity       Int         @default(1) // ØªØ¹Ø¯Ø§Ø¯ Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡
  status         OrderStatus @default(LOADING)
  InvoiceOwner   User?       @relation("userPost", fields: [InvoiceOwnerId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  InvoiceOwnerId String?     @db.ObjectId // Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± ÛŒÚ© Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø¯Ø§Ø±Ø¯
}

model Brand {
  id     String  @id @default(auto()) @map("_id") @db.ObjectId
  name   String  @unique // Ù†Ø§Ù… Ø¨Ø±Ù†Ø¯ØŒ Ù…Ø«Ù„ "Ø³Ø§Ù…Ø³ÙˆÙ†Ú¯"
  models Model[] @relation("brandOfModel") // Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ Ù…Ø¯Ù„â€ŒÙ‡Ø§ 
}

model Model {
  id       String    @id @default(auto()) @map("_id") @db.ObjectId
  name     String // Ù†Ø§Ù… Ù…Ø¯Ù„ØŒ Ù…Ø«Ù„ "A56"
  brandId  String?   @db.ObjectId // Ú©Ù„ÛŒØ¯ Ø®Ø§Ø±Ø¬ÛŒ Ø¨Ù‡ Ø¨Ø±Ù†Ø¯
  brand    Brand?    @relation("brandOfModel", fields: [brandId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  variants Variant[] @relation("modelOfVariant") // Ø±Ø§Ø¨Ø·Ù‡ Ø¨Ø§ ÙˆØ§Ø±ÛŒØ§Ù†Øªâ€ŒÙ‡Ø§ (Ø±Ù†Ú¯ + Ù…ÙˆØ¬ÙˆØ¯ÛŒ)
}

model Variant {
  id              String           @id @default(auto()) @map("_id") @db.ObjectId
  color           String // Ø±Ù†Ú¯ØŒ Ù…Ø«Ù„ "Ù‚Ø±Ù…Ø²"
  inventory       Int // Ù…ÙˆØ¬ÙˆØ¯ÛŒØŒ Ù…Ø«Ù„ 10
  modelId         String?          @db.ObjectId // Ú©Ù„ÛŒØ¯ Ø®Ø§Ø±Ø¬ÛŒ Ø¨Ù‡ Ù…Ø¯Ù„
  model           Model?           @relation("modelOfVariant", fields: [modelId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  invoices        InvoiceProduct[] @relation("invoiceVariant") // Ø±Ø§Ø¨Ø·Ù‡ Ù…Ø¹Ú©ÙˆØ³ Ø¨Ø§ InvoiceProduct
  // ğŸ”¥ Ø±Ø§Ø¨Ø·Ù‡ Ù…Ø¹Ú©ÙˆØ³ Ø¨Ø§ ProductVariant
  productVariants ProductVariant[]
}

model Colors {
  id          String  @id @default(auto()) @map("_id") @db.ObjectId
  color       String ///Ù‚Ø±Ù…Ø²
  inventory   Int // Ù…ÙˆØ¬ÙˆØ¯ÛŒØŒ Ù…Ø«Ù„ 10
  model       String ///Ù…Ù‚Ù„Ø§ Ø³Ø§ÛŒØ² 12  / Ø¹Ø±ÙˆØ³Ú©/ a56
  parentModel String? //Ù…Ø«Ù„Ø§ Ø¯Ø³ØªÙ‡ Ø¨Ø§Ù„Ø§ ØªØ± Ø§Ù† Ù…Ø«Ù„Ø§ Ø®ÙˆÙ†Ù‡ / 
  product     Product @relation("colors", fields: [productId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  productId   String  @db.ObjectId
}

model Adress {
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  location String
  state    String
  zipcode  String
  user     User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId   String @db.ObjectId
}

model Product {
  id                 String              @id @default(auto()) @map("_id") @db.ObjectId
  title              String
  price              Float // Ù‚ÛŒÙ…Øª Ø§ØµÙ„ÛŒ ØªØ§Ù…ÛŒÙ†â€ŒÚ©Ù†Ù†Ø¯Ù‡
  priceWithProfit    Float? // Ù‚ÛŒÙ…Øª ÙØ±ÙˆØ´Ú¯Ø§Ù‡ (Ø¨Ø§ Ø³ÙˆØ¯ Ø´Ù…Ø§)
  content            String?
  tableContent       String?
  count              Float
  countproduct       Float //Ù…Ù‚Ø¯Ø§Ø± Ú©Ù„ Ù…ÙˆØ¬ÙˆØ¯ÛŒ
  priceOffer         Float?
  listProperty       ListProperty[]
  tags               String[]
  colors             Colors[]            @relation("colors")
  review             ReviewList[]
  productImage       ProductImage[]
  // selectedVariantId   String?        @db.ObjectId // â† Ø§ÛŒÙ† Ø®Ø· Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
  published          Boolean             @default(false)
  author             User                @relation("userPost", fields: [authorId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  authorId           String              @db.ObjectId
  categoryList       CategoryList[]
  createdAt          DateTime            @default(now())
  updatedAt          DateTime            @updatedAt
  // productOrderOwner     InvoiceProduct?  @relation("poroductOrder", fields: [productOrderOwnerId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  // productOrderOwnerId   String?          @db.ObjectId
  // ğŸ”¥ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ÙˆØ§Ø±ÛŒØ§Ù†Øªâ€ŒÙ‡Ø§
  productVariants    ProductVariant[]
  purchaseOrderItems PurchaseOrderItem[]

  lastUpdatedBySupplier DateTime?
  supplier              Supplier? @relation("supplierProducts", fields: [supplierId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  supplierId            String?   @db.ObjectId
}

model Supplier {
  id                String    @id @default(auto()) @map("_id") @db.ObjectId
  name              String
  password          String
  phoneNumber       String    @unique
  address           String?
  products          Product[] @relation("supplierProducts")
  // purchaseOrders    PurchaseOrder[] @relation("supplierPurchaseOrders")
  lastReminderSent  DateTime?
  reminderFrequency String? // daily, weekly
  reminderTime      String? // HH:MM format
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt

  // PurchaseOrderId      String   @db.ObjectId //Ø§ÛŒØ¯ÛŒ Ù‡Ø± Ø³ÙØ§Ø±Ø´ 
  // PurchaseOrder        PurchaseOrder  @relation("supplierPurchaseOrders", fields: [PurchaseOrderId], references: [id], onDelete: Cascade, onUpdate: Cascade)
}

model PurchaseOrder {
  id              String              @id @default(auto()) @map("_id") @db.ObjectId
  items           PurchaseOrderItem[]
  // supplier Supplier[]    @relation("supplierPurchaseOrders") //Ù„ÛŒØ³Øª ØªØ§Ù…ÛŒÙ† Ú©Ù†Ù†Ø¯Ù‡ Ù‡Ø± Ø³ÙØ§Ø±Ø´ 
  // supplierId      String   @db.ObjectId ///Ø§ÛŒØ¯ÛŒ ØªØ§Ù…ÛŒÙ† Ú©Ù†Ù†Ø¯Ù‡
  // supplier        Supplier @relation("supplierPurchaseOrders", fields: [supplierId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  storeOwnerId    String              @db.ObjectId ///Ø§ÛŒØ¯ÛŒ Ø®Ø±ÛŒØ¯Ø§Ø±
  storeOwner      User                @relation("userPurchaseOrders", fields: [storeOwnerId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  // quantity        Float
  // colorsSelect    String //Ù‡Ø± Ú©Ø§Ø¨Ø± Ø§ÛŒØ¯ÛŒ Ø¯Ø§Ø±Ø¯ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù…Ø­ØµÙˆÙ„
  totalPrice      Float
  invoiceUrl      String? // URL ÙØ§Ú©ØªÙˆØ± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù‡
  trackingCode    String? // Ú©Ø¯ Ø±Ù‡Ú¯ÛŒØ±ÛŒ Ù¾Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø´ØªØ±ÛŒ Ù†Ù‡Ø§ÛŒÛŒ
  supplierNotes   String? // ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ ØªØ§Ù…ÛŒÙ†â€ŒÚ©Ù†Ù†Ø¯Ù‡
  storeOwnerNotes String? // ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ± ÙØ±ÙˆØ´Ú¯Ø§Ù‡

  status PurchaseOrderStatus @default(LOADING) // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Enum Ø¨Ø±Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PurchaseOrderItem {
  id      String        @id @default(auto()) @map("_id") @db.ObjectId
  orderId String        @db.ObjectId
  order   PurchaseOrder @relation(fields: [orderId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  productId String  @db.ObjectId

  quantity     Int     @default(1)
  colorsSelect String?
  unitPrice    Float
  totalPrice   Float
}

model ProductVariant {
  id        String  @id @default(auto()) @map("_id") @db.ObjectId
  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  productId String  @db.ObjectId
  variant   Variant @relation(fields: [variantId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  variantId String  @db.ObjectId
}

model ListProperty {
  id          String  @id @default(auto()) @map("_id") @db.ObjectId
  property    String
  PropertyOwn Product @relation(fields: [ownerId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  ownerId     String  @db.ObjectId
}

model ReviewList {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  reviewText String
  name       String
  email      String
  rating     Float
  createdAt  DateTime @default(now())
  reviewOwn  Product  @relation(fields: [ownerId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  ownerId    String   @db.ObjectId
}

model CategoryList {
  id          String  @id @default(auto()) @map("_id") @db.ObjectId
  category    String
  CategoryOwn Product @relation(fields: [ownerId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  ownerId     String  @db.ObjectId
}

model ProductImage {
  id           String   @id @default(auto()) @map("_id") @db.ObjectId
  defaultImage Boolean
  childImage   String
  fileKey      String?
  ImageOwn     Product? @relation(fields: [ownerId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  ownerId      String?  @db.ObjectId
  //   Products Products? @relation(fields: [productId],references: [id],onDelete: Cascade, onUpdate: Cascade) 
  //   productId String?
}
